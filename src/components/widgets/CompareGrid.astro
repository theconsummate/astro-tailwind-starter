---
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import { twMerge } from 'tailwind-merge';
import Headline from '~/components/ui/Headline.astro';
import { Icon } from 'astro-icon/components';
import type { CompareGrid as Props } from '~/types';

const {
    title = await Astro.slots.render('title'),
    subtitle = await Astro.slots.render('subtitle'),
    tagline = await Astro.slots.render('tagline'),
    categoryTool,
    thisTool,
    categoryToolClass = "bg-slate-100",
    thisToolClass = "bg-emerald-50",

    id,
    isDark = false,
    classes = {},
    bg = await Astro.slots.render('bg'),
} = Astro.props;

// const {
//   container: containerClass = '',
//   panel: panelClass = '',
//   title: titleClass = '',
//   description: descriptionClass = '',
// } = classes;

const defaultIconClass = 'text-primary border-primary';

const gridItems = [
    {
        ...categoryTool,
        classes: categoryToolClass,
    },
    {
        ...thisTool,
        // classes: "bg-white"
        classes: thisToolClass,
    },
];
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-7xl mx-auto ${classes?.container ?? ''}`} bg={bg}>
    <Headline
        title={title}
        subtitle={subtitle}
        tagline={tagline}
        classes={{
            title: 'text-3xl lg:text-4xl',
            ...((classes?.headline as object) ?? {}),
        }}
    />

    <!-- Comparison Grid -->
    <div class="mt-10 grid gap-6 md:grid-cols-2">
        <!-- Left: Category Tool Assumptions -->
        {
            gridItems.map((gridItem) => (
                <div class={twMerge('rounded-xl border border-slate-200 p-6', gridItem.classes)}>
                    <h3 class="text-lg lg:text-xl font-medium uppercase tracking-wide text-heading">
                        {gridItem.headline}
                    </h3>

                    <ul class="mt-4 space-y-3">
                        {gridItem.items.map(({ title, description, icon, classes: itemClasses = {} }) => (
                            <div class="flex gap-4 rounded-xl border border-slate-200 bg-white p-4">
                                <div class="flex items-center justify-center">
                                    {icon && (
                                        <Icon
                                            name={icon}
                                            class={twMerge(
                                                'w-9 h-9 p-2 rounded-full border-2',
                                                defaultIconClass,
                                                itemClasses?.icon
                                            )}
                                        />
                                    )}
                                </div>

                                <div>
                                    {title && <p class="text-base font-medium">{title}</p>}

                                    {description && <p class="mt-1 text-muted">{description}</p>}
                                </div>
                            </div>
                        ))}
                    </ul>
                </div>
            ))
        }
    </div>
</WidgetWrapper>
